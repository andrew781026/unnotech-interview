import{r as g,o as p,a as h,_,b as n,c,d as m,e as o,t as d,l as b,u as v,f as $,F as k,g as w,s as I,h as C,i as L}from"./main.53078ade.js";import{d as B,P as S}from"./PrimaryButton.3db7f8c0.js";const u=new IntersectionObserver(e=>{e.forEach(s=>{if(s.target instanceof HTMLImageElement){const t=s.isIntersecting,a=s.target.dataset.src,r=s.target.dataset.isReal;t&&a&&!r&&(s.target.src=a,s.target.dataset.isReal="true")}})}),R=e=>(p(()=>{u.observe(e.value)}),h(()=>{u.unobserve(e.value)}),u),V={name:"LazyImage",props:{isbn:String},setup(){const e=g(new Image);return R(e),{imageRef:e}}},y=["data-src"];function D(e,s,t,a,r,i){return n(),c("img",{ref:"imageRef",src:"https://fakeimg.pl/800x600/","data-src":`https://picsum.photos/800/600/?random=${t.isbn}`,alt:"\u5716\u7247"},null,8,y)}const P=_(V,[["render",D]]),x=m({name:"PureCard",props:{book:{type:Object,default:{}}},components:{LazyImage:P},data(){return{defaultImage:B}}}),E={class:"card w-96 bg-base-100 shadow-xl cursor-pointer hover:scale-110 transition-all"},O={class:"h-64"},U=["src"],j={class:"card-body"},z={class:"card-title"},F={class:"text-xs"},M={class:"font-bold self-start whitespace-pre-line line-clamp-3"};function A(e,s,t,a,r,i){return n(),c("div",E,[o("figure",O,[o("img",{class:"h-full object-cover",src:e.book.image||e.defaultImage,alt:"\u5716\u7247"},null,8,U)]),o("div",j,[o("h2",z,d(e.book.title),1),o("span",F,d(e.book.author),1),o("span",M,d(e.book.description),1)])])}const H=_(x,[["render",A]]);const N=m({name:"ListView",setup(){p(()=>b());const{toViewPage:e}=v();return{bookList:$,viewDetail:t=>{I(t),e(t.id)}}},components:{Card:H,PrimaryButton:S}}),T={class:"list"},q={class:"book-list"};function G(e,s,t,a,r,i){const f=L("Card");return n(),c("div",T,[o("div",q,[(n(!0),c(k,null,w(e.bookList,l=>(n(),C(f,{key:l.id,book:l,onClick:J=>e.viewDetail(l)},null,8,["book","onClick"]))),128))])])}const W=_(N,[["render",G],["__scopeId","data-v-193c1cb9"]]);export{W as default};
